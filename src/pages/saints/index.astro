---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Features3 from '~/components/widgets/Features3.astro';
import { getCollection } from 'astro:content';

export const prerender = true;

const metadata = {
  title: 'Святі покровителі',
};

let saints = [];
try {
  saints = await getCollection('saints');
} catch (error) {
  console.error('Error loading saints collection:', error);
}
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->
  <Hero>
    <Fragment slot="title">
      <span class="text-accent dark:text-white">Три святителі</span>
    </Fragment>

    <Fragment slot="subtitle">
      Святителі Василій Великий, Григорій Богослов та Іоанн Златоуст —
      три великі вчителі Церкви, чия пам'ять вшановується разом 12 лютого (30 січня за старим стилем).
    </Fragment>
  </Hero>

  <!-- Історія свята *************** -->
  <div class="mx-auto max-w-3xl px-4 sm:px-6 py-12 md:py-16">
    <div class="prose prose-lg dark:prose-invert max-w-none">
      <h2>Собор Трьох святителів</h2>
      <p>
        У XI столітті серед християн виникли суперечки про те, кого з трьох великих святителів
        вважати найбільшим: Василія Великого, Григорія Богослова чи Іоанна Златоуста.
        Одні віддавали перевагу Василію за його організаторський талант та аскетизм,
        інші вшановували Григорія за глибину богослов'я, треті захоплювалися красномовством Іоанна.
      </p>
      <p>
        У 1084 році митрополиту Євхаїтському Іоанну всі три святителі з'явилися уві сні та сказали:
        "Ми рівні перед Богом і немає між нами ні першого, ні другого."
        Тоді було встановлено спільне свято Трьох святителів.
      </p>
      <p>
        Це свято нагадує нам про єдність Церкви та про те, що різні дари Святого Духа
        служать одній меті — прославленню Бога та спасінню людей.
      </p>
    </div>
  </div>

  <!-- Святі *************** -->
  {saints.length > 0 ? (
    <Features3
      title="Наші святі покровителі"
      subtitle="Дізнайтеся більше про життя та вчення кожного зі святителів"
      columns={3}
      items={saints.map((saint) => ({
        title: saint.data.name,
        description: saint.data.shortDescription || saint.data.title || '',
        icon: 'tabler:star',
        callToAction: {
          text: 'Читати більше',
          href: `/saints/${saint.id}`,
        },
      }))}
    />
  ) : (
    <div class="mx-auto max-w-3xl px-4 sm:px-6 py-12 text-center">
      <p class="text-lg">Інформація про святих завантажується...</p>
    </div>
  )}

  <!-- Молитва *************** -->
  <div class="mx-auto max-w-3xl px-4 sm:px-6 pb-12 md:pb-16">
    <div class="bg-blue-50 dark:bg-slate-800 rounded-lg p-6 md:p-8">
      <h3 class="text-2xl font-bold mb-4 text-center">Тропар Трьом святителям, глас 4</h3>
      <div class="text-center italic">
        <p class="mb-4">
          Яко апостолів спільники і вселенськії вчителі,<br />
          Владико всіх, мир світові даруй<br />
          і душам нашим велію милість.
        </p>
      </div>
    </div>
  </div>
</Layout>
